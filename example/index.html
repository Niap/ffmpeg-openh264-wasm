<html>
  <head>
    <style>
      html, body {
        margin: 0;
        width: 100%;
        height: 100%
      }
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="./converter.js"></script>
    <!-- delete createAsm() && run() -->
    <script type="text/javascript" >
      var info = {
        'env': asmLibraryArg,
        'wasi_snapshot_preview1': asmLibraryArg,
      };
      function receiveInstance(instance) {
        var exports = instance.exports;
        Module['asm'] = exports;
        wasmMemory = Module['asm']['memory'];
        assert(wasmMemory, "memory not found in wasm exports");
        // This assertion doesn't hold when emscripten is run in --post-link
        // mode.
        // TODO(sbc): Read INITIAL_MEMORY out of the wasm file in post-link mode.
        assert(wasmMemory.buffer.byteLength === 268435456);
        updateGlobalBufferAndViews(wasmMemory.buffer);
        wasmTable = Module['asm']['__indirect_function_table'];
        assert(wasmTable, "table not found in wasm exports");
        addOnInit(Module['asm']['__wasm_call_ctors']);
        removeRunDependency('wasm-instantiate');
      }
      fetch("./converter.wasm", { credentials: 'same-origin' }).then((response)=>{
        response.arrayBuffer().then((binary)=>{
            WebAssembly.instantiate(binary, info).then((data)=>{
              addRunDependency('wasm-instantiate');
              run();
              receiveInstance(data.instance)
            })
        })
      })
    </script>
  </body>
</html>
